<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Heislab: source/order_handler.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Heislab
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">order_handler.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>functions that record, change or delete orders and lights  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="order__handler_8h__dep__incl.png" border="0" usemap="#source_2order__handler_8hdep" alt=""/></div>
<map name="source_2order__handler_8hdep" id="source_2order__handler_8hdep">
<area shape="rect" id="node2" href="Door__logic_8c_source.html" title="source/Door_logic.c" alt="" coords="5,80,144,107"/>
<area shape="rect" id="node3" href="main_8c_source.html" title="source/main.c" alt="" coords="168,80,272,107"/>
</map>
</div>
</div>
<p><a href="order__handler_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a778303313380fee1b1b85c7276ccc565"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="order__handler_8h.html#a778303313380fee1b1b85c7276ccc565">swap</a> (int *next_order_queue, int a, int b)</td></tr>
<tr class="memdesc:a778303313380fee1b1b85c7276ccc565"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function made to swap a number at index a with a number at index b in an array.  <a href="#a778303313380fee1b1b85c7276ccc565">More...</a><br /></td></tr>
<tr class="separator:a778303313380fee1b1b85c7276ccc565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab332e70ab2804ea51f6785d03abc46a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="order__handler_8h.html#ab332e70ab2804ea51f6785d03abc46a8">order_record</a> (int *inside, int *up, int *down)</td></tr>
<tr class="memdesc:ab332e70ab2804ea51f6785d03abc46a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function made to record the orders that we give via the buttons and record *them in the corresponding array.  <a href="#ab332e70ab2804ea51f6785d03abc46a8">More...</a><br /></td></tr>
<tr class="separator:ab332e70ab2804ea51f6785d03abc46a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159acf8c0e75ec66c6e2d8f41bbb3df3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="order__handler_8h.html#a159acf8c0e75ec66c6e2d8f41bbb3df3">order_delete</a> (int *inside, int *up, int *down, int *next)</td></tr>
<tr class="memdesc:a159acf8c0e75ec66c6e2d8f41bbb3df3"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function made to delete all the orders from the arrays. Used with the stop button.  <a href="#a159acf8c0e75ec66c6e2d8f41bbb3df3">More...</a><br /></td></tr>
<tr class="separator:a159acf8c0e75ec66c6e2d8f41bbb3df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a010a11a17a76600fcee792e16f64806e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="order__handler_8h.html#a010a11a17a76600fcee792e16f64806e">update_lights_and_orders</a> (int floor, int *inside, int *up, int *down)</td></tr>
<tr class="memdesc:a010a11a17a76600fcee792e16f64806e"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function made to turn of the lights and orders when we arrive at a corresponding floor.  <a href="#a010a11a17a76600fcee792e16f64806e">More...</a><br /></td></tr>
<tr class="separator:a010a11a17a76600fcee792e16f64806e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007a8d621bc967016c1621937c095e5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="order__handler_8h.html#a007a8d621bc967016c1621937c095e5f">update_queue</a> (int *queue, int current_floor)</td></tr>
<tr class="memdesc:a007a8d621bc967016c1621937c095e5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function made to delete the current_floor from the list of next orders, so the elevator doesn't go to the same floor twice. It sets the first number to 0, then it shifts all number except the first one spot to the left.  <a href="#a007a8d621bc967016c1621937c095e5f">More...</a><br /></td></tr>
<tr class="separator:a007a8d621bc967016c1621937c095e5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b444e8acd4d9949d10d7679256ac105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="order__handler_8h.html#a8b444e8acd4d9949d10d7679256ac105">set_order_lights</a> (int i)</td></tr>
<tr class="memdesc:a8b444e8acd4d9949d10d7679256ac105"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function made to set all order lights when the corresponding button is pushed. If i is one it will cycle through all button and lights the button if it is pushed. If i is 0 (used with the stop button) all the lights will be set low.  <a href="#a8b444e8acd4d9949d10d7679256ac105">More...</a><br /></td></tr>
<tr class="separator:a8b444e8acd4d9949d10d7679256ac105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf5362396e06c352829f23d221d08059"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="order__handler_8h.html#acf5362396e06c352829f23d221d08059">order_handler</a> (int *inside, int *up, int *down, int last_direction, int *next_order_queue, int current_floor, int state)</td></tr>
<tr class="memdesc:acf5362396e06c352829f23d221d08059"><td class="mdescLeft">&#160;</td><td class="mdescRight">A function that decides the priority of the orders. It useds the following steps:  <a href="#acf5362396e06c352829f23d221d08059">More...</a><br /></td></tr>
<tr class="separator:acf5362396e06c352829f23d221d08059"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>functions that record, change or delete orders and lights </p>

<p class="definition">Definition in file <a class="el" href="order__handler_8h_source.html">order_handler.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a159acf8c0e75ec66c6e2d8f41bbb3df3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a159acf8c0e75ec66c6e2d8f41bbb3df3">&#9670;&nbsp;</a></span>order_delete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void order_delete </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>inside</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>next</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function made to delete all the orders from the arrays. Used with the stop button. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">inside</td><td>The array of the orders from inside the elevator</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">up</td><td>The array of orders from outside the elevator going up</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">down</td><td>The array of orders from outside the elevator going down</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">next</td><td>The array that contains the next orders </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="order__handler_8c_source.html#l00042">42</a> of file <a class="el" href="order__handler_8c_source.html">order_handler.c</a>.</p>

</div>
</div>
<a id="acf5362396e06c352829f23d221d08059"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf5362396e06c352829f23d221d08059">&#9670;&nbsp;</a></span>order_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void order_handler </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>inside</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>last_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>next_order_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function that decides the priority of the orders. It useds the following steps: </p>
<ul>
<li>It checks if the direction is Up, Down or Stop. e.g. If the direction is up, it will only care about orders that are going up or from inside the elevator.</li>
<li>The first for-loop is used to cycle through all the orders and it will only proceed if there is an order which is the job of the if-statement.</li>
<li>The second for-loop is used to cycle through the next_order_queue to add the new orders, if an order to the same floor doesn't already exit. Uesd to avoid duplicate orders.</li>
<li><p class="startli">The secret sauce is the third if statement. It prioritises the orders to make the execution more streamlined. e.g. if the 3. floor inside is pushed and the 2. floor up afterwards, and the elevator is below the 2. floor, it will take the 2. floor before the 3. it compares the first order in the next_order_queue and with the other orders at swaps them if it will come to another floor first.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current_floor</td><td>The floor we are currently at</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">state</td><td>The state we are currently in(Stationary_f, Up ...)</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">last_direction</td><td>The direction the elevator is travelling. 1= up, 2 = down, 0 = stop</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">inside</td><td>The array of the orders from inside the elevator</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">up</td><td>The array of the orders from outside the elevator going up</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">down</td><td>The array of the orders from outside the elevator going down</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">next_order_queue</td><td>The array that contains the next orders </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="order__handler_8c_source.html#l00130">130</a> of file <a class="el" href="order__handler_8c_source.html">order_handler.c</a>.</p>

</div>
</div>
<a id="ab332e70ab2804ea51f6785d03abc46a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab332e70ab2804ea51f6785d03abc46a8">&#9670;&nbsp;</a></span>order_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void order_record </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>inside</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>down</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function made to record the orders that we give via the buttons and record *them in the corresponding array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">inside</td><td>The array of the orders from inside the elevator</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">up</td><td>The array of the orders from outside the elevator going up</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">down</td><td>The array of the orders from outside the elevator going down </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="order__handler_8c_source.html#l00011">11</a> of file <a class="el" href="order__handler_8c_source.html">order_handler.c</a>.</p>

</div>
</div>
<a id="a8b444e8acd4d9949d10d7679256ac105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b444e8acd4d9949d10d7679256ac105">&#9670;&nbsp;</a></span>set_order_lights()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_order_lights </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function made to set all order lights when the corresponding button is pushed. If i is one it will cycle through all button and lights the button if it is pushed. If i is 0 (used with the stop button) all the lights will be set low. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i</td><td>This int decides if the lights should be set as normal(1) or reset at turned off(0) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="order__handler_8c_source.html#l00057">57</a> of file <a class="el" href="order__handler_8c_source.html">order_handler.c</a>.</p>

</div>
</div>
<a id="a778303313380fee1b1b85c7276ccc565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a778303313380fee1b1b85c7276ccc565">&#9670;&nbsp;</a></span>swap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void swap </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>next_order_queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function made to swap a number at index a with a number at index b in an array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">next_order_queue</td><td>The queue of orders that we want to change</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">a</td><td>An int that indicate the spot of the number we want to change</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">b</td><td>An int that indicate the spot of the number we want to change&gt; </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="order__handler_8c_source.html#l00104">104</a> of file <a class="el" href="order__handler_8c_source.html">order_handler.c</a>.</p>

</div>
</div>
<a id="a010a11a17a76600fcee792e16f64806e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a010a11a17a76600fcee792e16f64806e">&#9670;&nbsp;</a></span>update_lights_and_orders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_lights_and_orders </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>floor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>inside</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>up</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>down</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function made to turn of the lights and orders when we arrive at a corresponding floor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">floor</td><td>The floor we are currently at</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">inside</td><td>The array of the orders from inside the elevator</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">up</td><td>The array of the orders from outside the elevator going up</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">down</td><td>The array of the orders from outside the elevator going down </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="order__handler_8c_source.html#l00089">89</a> of file <a class="el" href="order__handler_8c_source.html">order_handler.c</a>.</p>

</div>
</div>
<a id="a007a8d621bc967016c1621937c095e5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a007a8d621bc967016c1621937c095e5f">&#9670;&nbsp;</a></span>update_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void update_queue </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>current_floor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A function made to delete the current_floor from the list of next orders, so the elevator doesn't go to the same floor twice. It sets the first number to 0, then it shifts all number except the first one spot to the left. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">current_floor</td><td>The floor we are currently at</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">queue</td><td>The array that contains the next orders </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="order__handler_8c_source.html#l00115">115</a> of file <a class="el" href="order__handler_8c_source.html">order_handler.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
